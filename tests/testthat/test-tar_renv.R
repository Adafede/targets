tar_test("tar_renv() works", {
  expect_false(file.exists("_packages.R"))
  tar_option_set(packages = c("tidyverse", "qs"))
  tar_renv(ask = FALSE)
  expect_true(file.exists("_packages.R"))
  expect_equal(
    readLines("_packages.R"),
    c(
      "# Generated by targets::tar_env: do not edit by hand",
      paste0("library(", c("tidyverse", "qs"), ")")
      )
    )
})
